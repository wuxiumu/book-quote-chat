<template>
  <div>
    <h2 class="text-2xl font-bold mb-4">📚 书摘金句</h2>
    <div class="grid gap-4 md:grid-cols-2 lg:grid-cols-3">
      <QuoteCard v-for="q in quotes" :key="q.id" :quote="q" />
    </div>
  </div>
</template>

<script setup lang="ts">
import { ref, onMounted } from 'vue';
import QuoteCard from '@/components/QuoteCard.vue';

// 用户昵称和头像（头像用 DiceBear API 随机生成）
const users = [
  { name: '阿狸', avatar: 'https://api.dicebear.com/7.x/miniavs/svg?seed=ali' },
  { name: '小王', avatar: 'https://api.dicebear.com/7.x/miniavs/svg?seed=wang' },
  { name: 'Lina', avatar: 'https://api.dicebear.com/7.x/miniavs/svg?seed=lina' },
  { name: '小马', avatar: 'https://api.dicebear.com/7.x/miniavs/svg?seed=ma' },
  { name: '半夏', avatar: 'https://api.dicebear.com/7.x/miniavs/svg?seed=banxia' },
  { name: '安然', avatar: 'https://api.dicebear.com/7.x/miniavs/svg?seed=anran' },
  { name: '木子', avatar: 'https://api.dicebear.com/7.x/miniavs/svg?seed=muzi' },
  { name: '晚风', avatar: 'https://api.dicebear.com/7.x/miniavs/svg?seed=wanfeng' },
  { name: '暮色', avatar: 'https://api.dicebear.com/7.x/miniavs/svg?seed=muse' },
  { name: '阿酒', avatar: 'https://api.dicebear.com/7.x/miniavs/svg?seed=jiu' },
  { name: '小红', avatar: 'https://api.dicebear.com/7.x/miniavs/svg?seed=xiaohong' },
  { name: '阿木', avatar: 'https://api.dicebear.com/7.x/miniavs/svg?seed=amu' },
  { name: '露露', avatar: 'https://api.dicebear.com/7.x/miniavs/svg?seed=lulu' },
  { name: '嘉木', avatar: 'https://api.dicebear.com/7.x/miniavs/svg?seed=jiamu' },
  { name: '七喜', avatar: 'https://api.dicebear.com/7.x/miniavs/svg?seed=qixi' },
];

// 所有金句文本
const quoteTexts = [
    // 豆瓣神评（部分例子，完整请用上条回复的内容）
    { id: "d1", text: "人这一生，总要走过几段夜路，才懂得什么是温柔与慈悲。", book: "《活着》", user: "豆瓣网友·阿狸", created: "2025-06-27T09:15:00Z" },
    { id: "d2", text: "愿你出走半生，归来仍是少年。", book: "《愿你慢慢长大》", user: "豆瓣网友·啵啵", created: "2025-06-27T09:16:00Z" },
    { id: "d3", text: "世界上所有的相遇，都是久别重逢。", book: "《百年孤独》", user: "豆瓣网友·小马", created: "2025-06-27T09:17:00Z" },
    { id: "d4", text: "你走过的路，会成为脚下的光。", book: "《目送》", user: "豆瓣网友·弦歌", created: "2025-06-27T09:18:00Z" },
    { id: "d5", text: "温柔要有，但不是妥协，我们要在安静中，不慌不忙地坚强。", book: "《我们仨》", user: "豆瓣网友·安然", created: "2025-06-27T09:19:00Z" },
    { id: "d6", text: "人间烟火气，最抚凡人心。", book: "《人间失格》", user: "豆瓣网友·木子", created: "2025-06-27T09:20:00Z" },
    { id: "d7", text: "生活明朗，万物可爱。", book: "《小王子》", user: "豆瓣网友·Lina", created: "2025-06-27T09:21:00Z" },
    { id: "d8", text: "你要相信，这个世界总有人偷偷爱着你。", book: "《解忧杂货店》", user: "豆瓣网友·半夏", created: "2025-06-27T09:22:00Z" },
    { id: "d9", text: "你逆光而来，配得上这世间所有的美好。", book: "《偷影子的人》", user: "豆瓣网友·木木", created: "2025-06-27T09:23:00Z" },
    { id: "d10", text: "人间值得，未来可期。", book: "《平凡的世界》", user: "豆瓣网友·知秋", created: "2025-06-27T09:24:00Z" },
    { id: "d11", text: "总有人山高路远为你而来。", book: "《岛上书店》", user: "豆瓣网友·阿酒", created: "2025-06-27T09:25:00Z" },
    { id: "d12", text: "你要悄悄拔尖，然后惊艳所有人。", book: "《撒野》", user: "豆瓣网友·玫瑰", created: "2025-06-27T09:26:00Z" },
    { id: "d13", text: "心有猛虎，细嗅蔷薇。", book: "《飞鸟集》", user: "豆瓣网友·简白", created: "2025-06-27T09:27:00Z" },
    { id: "d14", text: "哪有什么岁月静好，不过是有人替你负重前行。", book: "《白夜行》", user: "豆瓣网友·暖阳", created: "2025-06-27T09:28:00Z" },
    { id: "d15", text: "你要永远热爱生活，永远被生活热爱。", book: "《追风筝的人》", user: "豆瓣网友·棉花糖", created: "2025-06-27T09:29:00Z" },
    { id: "d16", text: "既然选择了远方，便只顾风雨兼程。", book: "《面朝大海 春暖花开》", user: "豆瓣网友·云朵", created: "2025-06-27T09:30:00Z" },
    { id: "d17", text: "你要做自己的太阳，无需凭借谁的光。", book: "《人间值得》", user: "豆瓣网友·柚子", created: "2025-06-27T09:31:00Z" },
    { id: "d18", text: "我们终将被温柔以待。", book: "《撒哈拉的故事》", user: "豆瓣网友·小蓝", created: "2025-06-27T09:32:00Z" },
    { id: "d19", text: "人生海海，各有渡口。", book: "《浮生六记》", user: "豆瓣网友·暮色", created: "2025-06-27T09:33:00Z" },
    { id: "d20", text: "山高路远，看世界也看自己。", book: "《目送》", user: "豆瓣网友·陶然", created: "2025-06-27T09:34:00Z" },
    { id: "d21", text: "所有的偶遇，其实都是久别重逢。", book: "《百年孤独》", user: "豆瓣网友·安九", created: "2025-06-27T09:35:00Z" },
    { id: "d22", text: "希望你一直温柔且有力量。", book: "《白夜行》", user: "豆瓣网友·七月", created: "2025-06-27T09:36:00Z" },
    { id: "d23", text: "活得太清醒本就是一场辛苦。", book: "《小王子》", user: "豆瓣网友·柳叶", created: "2025-06-27T09:37:00Z" },
    { id: "d24", text: "爱自己，是终身浪漫的开始。", book: "《岛上书店》", user: "豆瓣网友·深秋", created: "2025-06-27T09:38:00Z" },
    { id: "d25", text: "你要允许自己偶尔不开心，但别忘了重新出发。", book: "《解忧杂货店》", user: "豆瓣网友·嘉木", created: "2025-06-27T09:39:00Z" },
    { id: "d26", text: "孤独的人有他们自己的沼泽。", book: "《人间失格》", user: "豆瓣网友·野子", created: "2025-06-27T09:40:00Z" },
    { id: "d27", text: "也许人间本不该懂得太多。", book: "《平凡的世界》", user: "豆瓣网友·阿木", created: "2025-06-27T09:41:00Z" },
    { id: "d28", text: "每个人心里都有一片海，自己不扬帆没人帮你启航。", book: "《撒哈拉的故事》", user: "豆瓣网友·露露", created: "2025-06-27T09:42:00Z" },
    { id: "d29", text: "请保持热爱，奔赴下一场山海。", book: "《面朝大海 春暖花开》", user: "豆瓣网友·夏风", created: "2025-06-27T09:43:00Z" },
    { id: "d30", text: "但愿日子清净，抬头遇见的都是柔情。", book: "《浮生六记》", user: "豆瓣网友·七喜", created: "2025-06-27T09:44:00Z" },

    // 网易云热评
    { id: "n1", text: "听懂的人早已泪流满面，听不懂的人依旧嘻嘻哈哈。", book: "网易云热评", user: "云村·无语", created: "2025-06-27T10:01:00Z" },
    { id: "n2", text: "等你等到我心痛，等到分不清东南西北风。", book: "网易云热评", user: "云村·小王", created: "2025-06-27T10:02:00Z" },
    { id: "n3", text: "我频繁记录着，因为觉得生活值得。", book: "网易云热评", user: "云村·晚风", created: "2025-06-27T10:03:00Z" },
    { id: "n4", text: "后来你走了，风停了，雨也散了。", book: "网易云热评", user: "云村·星辰", created: "2025-06-27T10:04:00Z" },
    { id: "n5", text: "熬过无人问津的日子，才配拥有诗和远方。", book: "网易云热评", user: "云村·橘子", created: "2025-06-27T10:05:00Z" },
    { id: "n6", text: "你是我纸短情长里，最温柔的一段。", book: "网易云热评", user: "云村·鹤鸣", created: "2025-06-27T10:06:00Z" },
    { id: "n7", text: "你陪我走过的路，叫做未来可期。", book: "网易云热评", user: "云村·苏木", created: "2025-06-27T10:07:00Z" },
    { id: "n8", text: "爱意东升西落，浪漫至死不渝。", book: "网易云热评", user: "云村·小鱼", created: "2025-06-27T10:08:00Z" },
    { id: "n9", text: "总有人间一两风，填我十万八千梦。", book: "网易云热评", user: "云村·六月", created: "2025-06-27T10:09:00Z" },
    { id: "n10", text: "你不用多好，我喜欢就好。", book: "网易云热评", user: "云村·秋意", created: "2025-06-27T10:10:00Z" },
    { id: "n11", text: "如果有一天你累了，记得还有我。", book: "网易云热评", user: "云村·落叶", created: "2025-06-27T10:11:00Z" },
    { id: "n12", text: "说不尽的心酸只能当笑谈。", book: "网易云热评", user: "云村·阿梓", created: "2025-06-27T10:12:00Z" },
    { id: "n13", text: "人生如逆旅，我亦是行人。", book: "网易云热评", user: "云村·小涵", created: "2025-06-27T10:13:00Z" },
    { id: "n14", text: "不是每一句对不起，都能换来一句没关系。", book: "网易云热评", user: "云村·栗子", created: "2025-06-27T10:14:00Z" },
    { id: "n15", text: "这一生，总要一个人走夜路，总要一个人扛下所有。", book: "网易云热评", user: "云村·陈西", created: "2025-06-27T10:15:00Z" },
    { id: "n16", text: "等风也等你，至死不渝。", book: "网易云热评", user: "云村·暮色", created: "2025-06-27T10:16:00Z" },
    { id: "n17", text: "你要等，等春风吹醒了枝头，也吹暖了你。", book: "网易云热评", user: "云村·知南", created: "2025-06-27T10:17:00Z" },
    { id: "n18", text: "既然生活总要继续，不如热爱一下生活。", book: "网易云热评", user: "云村·野子", created: "2025-06-27T10:18:00Z" },
    { id: "n19", text: "最怕空气突然安静，最怕朋友突然的关心。", book: "网易云热评", user: "云村·小恩", created: "2025-06-27T10:19:00Z" },
    { id: "n20", text: "没有天生适合的两个人，只有不断靠近的两颗心。", book: "网易云热评", user: "云村·老陈", created: "2025-06-27T10:20:00Z" }
  ];

// 随机 mock 填充
function randomDateInRange(days = 10) {
  const now = Date.now();
  return new Date(now - Math.floor(Math.random() * days * 86400000)).toISOString();
}

function getRandomUser() {
  return users[Math.floor(Math.random() * users.length)];
}

interface Quote {
  id: string;
  text: string;
  book: string;
  user: string;
  avatar: string;
  created: string;
}

const quotes = ref<Quote[]>([]);

onMounted(() => {
  quotes.value = quoteTexts.map((q, idx) => {
    const u = getRandomUser();
    return {
      id: 'm' + (idx + 1),
      text: q.text,
      book: q.book,
      user: u.name,
      avatar: u.avatar,
      created: randomDateInRange(10),
    };
  });
  // 给quotes.value 追加随机用户
  quotes.value.push({
    id: 'm' + (quotes.value.length + 1),
    text: getRandomText(),
    book: "抖音神评论",
    user: randomUser().name,
    avatar: "https://api.dicebear.com/7.x/miniavs/svg?seed=阿狸",
    created: randomDate(), // 随机时间
  });

});
// 用户昵称池
const userNames = [
  "阿狸", "小王", "Lina", "小马", "半夏", "安然", "木子", "晚风", "暮色", "阿酒",
  "小红", "阿木", "露露", "嘉木", "七喜", "小南", "棉花糖", "知秋", "柚子", "柳叶"
];

// 自动生成情感金句 mock 数据
function getRandomText() {
  const quoteTexts1 = [
    "成年人的崩溃，常常只在一瞬间，但没人会在意你的眼泪。",
    "最怕你一生碌碌无为，还安慰自己平凡可贵。",
    "喜欢是乍见之欢，爱是久处不厌。",
    "后来我明白，很多事说再多也没有用。",
    "失望攒够了就离开吧，别回头。",
    "人和人真是说散就散，连个告别都没有。",
    "遗憾和年轻总绑在一起。",
    "你不主动，我们就真的没关系了。",
    "其实你早就知道了答案，只是不愿意承认罢了。",
    "有些人，看清了也就看轻了。",
    "有些关系，断了就让它断吧，反正重连也没意思。",
    "幸福不是得到你想要的一切，而是享受你拥有的一切。",
    "谢谢你的绝情，让我学会死心。",
    "成年人的世界，没有容易二字。",
    "人生没有白走的路，每一步都算数。",
    "你是我见过最难忘的人，却不是我最爱的人。",
    "有些遗憾，注定陪伴一生。",
    "明明喜欢却假装无所谓，错过了就真的没了。",
    "在最难过的时候学会了沉默。",
    "每次心软都给了自己一巴掌。",
    "感情淡了就散了吧，强求没有意义。",
    "有些话，说了也是错，不说也是错。",
    "最好的关系，是舒服而自然。",
    "你走了真好，不然总担心你要走。",
    "再见容易，再见很难。",
    "时间会告诉你，越是平淡越长久。",
    "爱而不得最心酸。",
    "后来遇见的人都不像你。",
    "总有人教会你成长，然后转身离开。",
    "人这一辈子，说过的谎最多的是：我没事。"
  ];
  // 随机选择一句情感金句
  const randomIndex = Math.floor(Math.random() * quoteTexts1.length);
  return quoteTexts1[randomIndex];
}


function randomDate(days = 20) {
  const now = Date.now();
  return new Date(now - Math.floor(Math.random() * days * 86400000)).toISOString();
}

function randomUser() {
  const name = userNames[Math.floor(Math.random() * userNames.length)];
  const avatar = `https://api.dicebear.com/7.x/miniavs/svg?seed=${encodeURIComponent(name)}`;
  return { name, avatar };
}
</script>
<!--<script setup lang="ts">-->
<!--import { ref, onMounted } from 'vue';-->
<!--import QuoteCard from '@/components/QuoteCard.vue';-->

<!--interface Quote {-->
<!--  id: string;-->
<!--  text: string;-->
<!--  book: string;-->
<!--  user: string;-->
<!--  created: string;-->
<!--}-->

<!--const quotes = ref<Quote[]>([]);-->

<!--onMounted(async () => {-->
<!--  const res = await fetch('/api/quotes');-->
<!--  quotes.value = await res.json();-->
<!--});-->
<!--</script>-->
